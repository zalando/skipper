
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://opensource.zalando.com/skipper/reference/predicates/">
      
      
        <link rel="prev" href="../filters/">
      
      
        <link rel="next" href="../backends/">
      
      
        
      
      
      <link rel="icon" href="../../favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.3">
    
    
      
        <title>Predicates - Skipper</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#skipper-predicates" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Skipper" class="md-header__button md-logo" aria-label="Skipper" data-md-component="logo">
      
  <img src="../../skipper-h180.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Skipper
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Predicates
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/zalando/skipper/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Skipper" class="md-nav__button md-logo" aria-label="Skipper" data-md-component="logo">
      
  <img src="../../skipper-h180.png" alt="logo">

    </a>
    Skipper
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/zalando/skipper/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../filters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Filters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Predicates
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Predicates
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#predicate-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      
        Predicate arguments
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-path-tree" class="md-nav__link">
    <span class="md-ellipsis">
      
        The path tree
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The path tree">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#path" class="md-nav__link">
    <span class="md-ellipsis">
      
        Path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pathsubtree" class="md-nav__link">
    <span class="md-ellipsis">
      
        PathSubtree
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pathregexp" class="md-nav__link">
    <span class="md-ellipsis">
      
        PathRegexp
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#host" class="md-nav__link">
    <span class="md-ellipsis">
      
        Host
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hostany" class="md-nav__link">
    <span class="md-ellipsis">
      
        HostAny
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forwarded-header-predicates" class="md-nav__link">
    <span class="md-ellipsis">
      
        Forwarded header predicates
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Forwarded header predicates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#forwardedhost" class="md-nav__link">
    <span class="md-ellipsis">
      
        ForwardedHost
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forwardedprotocol" class="md-nav__link">
    <span class="md-ellipsis">
      
        ForwardedProtocol
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#weight" class="md-nav__link">
    <span class="md-ellipsis">
      
        Weight
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#true" class="md-nav__link">
    <span class="md-ellipsis">
      
        True
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#false" class="md-nav__link">
    <span class="md-ellipsis">
      
        False
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      
        Shutdown
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#method" class="md-nav__link">
    <span class="md-ellipsis">
      
        Method
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        Methods
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#header" class="md-nav__link">
    <span class="md-ellipsis">
      
        Header
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#headerregexp" class="md-nav__link">
    <span class="md-ellipsis">
      
        HeaderRegexp
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cookie" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cookie
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auth" class="md-nav__link">
    <span class="md-ellipsis">
      
        Auth
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Auth">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jwtpayloadanykv" class="md-nav__link">
    <span class="md-ellipsis">
      
        JWTPayloadAnyKV
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jwtpayloadallkv" class="md-nav__link">
    <span class="md-ellipsis">
      
        JWTPayloadAllKV
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jwtpayloadanykvregexp-jwtpayloadallkvregexp" class="md-nav__link">
    <span class="md-ellipsis">
      
        JWTPayloadAnyKVRegexp, JWTPayloadAllKVRegexp
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#headersha256" class="md-nav__link">
    <span class="md-ellipsis">
      
        HeaderSHA256
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interval" class="md-nav__link">
    <span class="md-ellipsis">
      
        Interval
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Interval">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#after" class="md-nav__link">
    <span class="md-ellipsis">
      
        After
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#before" class="md-nav__link">
    <span class="md-ellipsis">
      
        Before
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#between" class="md-nav__link">
    <span class="md-ellipsis">
      
        Between
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cron" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cron
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryparam" class="md-nav__link">
    <span class="md-ellipsis">
      
        QueryParam
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#source" class="md-nav__link">
    <span class="md-ellipsis">
      
        Source
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Source">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sourcefromlast" class="md-nav__link">
    <span class="md-ellipsis">
      
        SourceFromLast
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clientip" class="md-nav__link">
    <span class="md-ellipsis">
      
        ClientIP
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tee" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tee
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#traffic" class="md-nav__link">
    <span class="md-ellipsis">
      
        Traffic
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trafficsegment" class="md-nav__link">
    <span class="md-ellipsis">
      
        TrafficSegment
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contentlengthbetween" class="md-nav__link">
    <span class="md-ellipsis">
      
        ContentLengthBetween
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opentelemetry-otel" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenTelemetry - OTel
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OpenTelemetry - OTel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#otelbaggage" class="md-nav__link">
    <span class="md-ellipsis">
      
        OTelBaggage
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../backends/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Backends
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../egress/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Egress
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../scripts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scripts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Plugins
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../routing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Routing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_10" >
        
          
          <label class="md-nav__link" for="__nav_2_10" id="__nav_2_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Data Clients
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data Clients
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-clients/eskip-file/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Eskip File
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-clients/eskip-remote/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Remote Eskip
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-clients/route-string/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Route String
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-clients/kubernetes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kubernetes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-clients/etcd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Etcd
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_11" >
        
          
          <label class="md-nav__link" for="__nav_2_11" id="__nav_2_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Operation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    Operation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation/deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation/operation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Operation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Kubernetes
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Kubernetes
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/ingress-controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ingress Controller Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/ingress-usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ingress Usage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/ingress-backends/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ingress Backends
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/routegroups/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RouteGroups
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/routegroup-crd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RouteGroup CRD Semantics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/routegroup-validation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RouteGroup Validation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/east-west-usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    East-West aka svc-to-svc
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/external-addresses/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    External Addresses aka External Name
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/migrate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Migration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Tutorials
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tutorials
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Basics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/common-use-cases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Common Use Cases
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication and Authorization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/ratelimit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ratelimits
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/shadow-traffic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Shadow Traffic
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Operations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/built-your-own/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Built Your Own Proxy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#predicate-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      
        Predicate arguments
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-path-tree" class="md-nav__link">
    <span class="md-ellipsis">
      
        The path tree
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The path tree">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#path" class="md-nav__link">
    <span class="md-ellipsis">
      
        Path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pathsubtree" class="md-nav__link">
    <span class="md-ellipsis">
      
        PathSubtree
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pathregexp" class="md-nav__link">
    <span class="md-ellipsis">
      
        PathRegexp
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#host" class="md-nav__link">
    <span class="md-ellipsis">
      
        Host
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hostany" class="md-nav__link">
    <span class="md-ellipsis">
      
        HostAny
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forwarded-header-predicates" class="md-nav__link">
    <span class="md-ellipsis">
      
        Forwarded header predicates
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Forwarded header predicates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#forwardedhost" class="md-nav__link">
    <span class="md-ellipsis">
      
        ForwardedHost
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forwardedprotocol" class="md-nav__link">
    <span class="md-ellipsis">
      
        ForwardedProtocol
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#weight" class="md-nav__link">
    <span class="md-ellipsis">
      
        Weight
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#true" class="md-nav__link">
    <span class="md-ellipsis">
      
        True
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#false" class="md-nav__link">
    <span class="md-ellipsis">
      
        False
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      
        Shutdown
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#method" class="md-nav__link">
    <span class="md-ellipsis">
      
        Method
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        Methods
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#header" class="md-nav__link">
    <span class="md-ellipsis">
      
        Header
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#headerregexp" class="md-nav__link">
    <span class="md-ellipsis">
      
        HeaderRegexp
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cookie" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cookie
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auth" class="md-nav__link">
    <span class="md-ellipsis">
      
        Auth
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Auth">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jwtpayloadanykv" class="md-nav__link">
    <span class="md-ellipsis">
      
        JWTPayloadAnyKV
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jwtpayloadallkv" class="md-nav__link">
    <span class="md-ellipsis">
      
        JWTPayloadAllKV
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jwtpayloadanykvregexp-jwtpayloadallkvregexp" class="md-nav__link">
    <span class="md-ellipsis">
      
        JWTPayloadAnyKVRegexp, JWTPayloadAllKVRegexp
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#headersha256" class="md-nav__link">
    <span class="md-ellipsis">
      
        HeaderSHA256
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interval" class="md-nav__link">
    <span class="md-ellipsis">
      
        Interval
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Interval">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#after" class="md-nav__link">
    <span class="md-ellipsis">
      
        After
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#before" class="md-nav__link">
    <span class="md-ellipsis">
      
        Before
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#between" class="md-nav__link">
    <span class="md-ellipsis">
      
        Between
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cron" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cron
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryparam" class="md-nav__link">
    <span class="md-ellipsis">
      
        QueryParam
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#source" class="md-nav__link">
    <span class="md-ellipsis">
      
        Source
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Source">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sourcefromlast" class="md-nav__link">
    <span class="md-ellipsis">
      
        SourceFromLast
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clientip" class="md-nav__link">
    <span class="md-ellipsis">
      
        ClientIP
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tee" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tee
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#traffic" class="md-nav__link">
    <span class="md-ellipsis">
      
        Traffic
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trafficsegment" class="md-nav__link">
    <span class="md-ellipsis">
      
        TrafficSegment
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contentlengthbetween" class="md-nav__link">
    <span class="md-ellipsis">
      
        ContentLengthBetween
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opentelemetry-otel" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenTelemetry - OTel
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OpenTelemetry - OTel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#otelbaggage" class="md-nav__link">
    <span class="md-ellipsis">
      
        OTelBaggage
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="skipper-predicates">Skipper Predicates<a class="headerlink" href="#skipper-predicates" title="Permanent link">&para;</a></h1>
<p>Predicates are used to decide which route will handle an incoming request. Routes can contain multiple
predicates. A request will match a route only if all the predicates of the route match. See the description of
the route matching mechanism here: <a href="../../tutorials/basics/#route-matching">Route matching</a>.</p>
<p>Example route with a Host, Method and Path match predicates and a backend:</p>
<div class="highlight"><pre><span></span><code>all: Host(/^my-host-header\.example\.org$/) &amp;&amp; Method(&quot;GET&quot;) &amp;&amp; Path(&quot;/hello&quot;) -&gt; &quot;http://127.0.0.1:1234/&quot;;
</code></pre></div>
<h2 id="predicate-arguments">Predicate arguments<a class="headerlink" href="#predicate-arguments" title="Permanent link">&para;</a></h2>
<p>The predicate arguments can be strings, regular expressions or numbers (float64, int). In the eskip syntax
representation:</p>
<ul>
<li>strings are surrounded by double quotes (<code>"</code>). When necessary, characters can be escaped by <code>\</code>, e.g. <code>\\</code> or <code>\"</code>.</li>
<li>regular expressions are a <a href="https://github.com/google/re2/wiki/Syntax">re2 regular expression</a>, surrounded by</li>
<li><code>/</code>, e.g. <code>/^www\.example\.org(:\d+)?$/</code>. When a predicate expects a regular expression as an argument, the string representation with double quotes can be used, as well.</li>
<li>numbers are regular (decimal) numbers like <code>401</code> or <code>1.23456</code>. The eskip syntax doesn&rsquo;t define a limitation on the size of the numbers, but the underlying implementation currently relies on the float64 values of the Go runtime.</li>
</ul>
<p>Other higher level argument types must be represented as one of the above types. E.g. it is a convention to
represent time duration values as strings, parseable by <a href="https://pkg.go.dev/time#ParseDuration">time.Duration</a>).</p>
<h2 id="the-path-tree">The path tree<a class="headerlink" href="#the-path-tree" title="Permanent link">&para;</a></h2>
<p>There is an important difference between the evaluation of the <a href="#path">Path</a> or <a href="#pathsubtree">PathSubtree</a> predicates, and the
evaluation of all the other predicates (<a href="#pathregexp">PathRegexp</a> belonging to the second group). Find an explanation in the
<a href="../../tutorials/basics/#route-matching">Route matching</a> section explanation section.</p>
<h3 id="path">Path<a class="headerlink" href="#path" title="Permanent link">&para;</a></h3>
<p>The path predicate is used to match the path in HTTP request line. It accepts a single argument, that can be a
fixed path like &ldquo;/some/path&rdquo;, or it can contain wildcards. There can be only zero or one path predicate in a
route.</p>
<p><strong>Wildcards:</strong></p>
<p>Wildcards can be put in place of one or more path segments in the path, e.g. &ldquo;/some/:dir/:name&rdquo;, or the path can
end with a free wildcard like <code>"/some/path/*param"</code>, where the free wildcard can match against a sub-path with
multiple segments. Note, that this solution implicitly supports the glob standard, e.g. <code>"/some/path/**"</code> will
work as expected. The wildcards must follow a <code>/</code>.</p>
<p>The arguments are available to the filters while processing the matched requests, but
currently only a few built-in filters utilize them, and they can be used rather only from custom filter
extensions.</p>
<p><strong>Known bug:</strong></p>
<p>There is a known bug with how predicates of the form <code>Path("/foo/*")</code> are currently handled. Note the wildcard
defined with <code>*</code> doesn&rsquo;t have a name here. Wildcards must have a name, but Skipper currently does not reject
these routes, resulting in undefined behavior.</p>
<p><strong>Invalid patterns:</strong></p>
<p>Free wildcards (<code>*</code> or <code>**</code>) <strong>must be at the end of the path</strong>. Using a free wildcard in the middle of the path
is invalid and will result in the error <code>free wildcard param should be last</code>. If you need to match a path segment
in the middle, use a named parameter (<code>:param</code>) instead.</p>
<p><strong>Trailing slash:</strong></p>
<p>By default, <code>Path("/foo")</code> and <code>Path("/foo/")</code> are not equivalent. Ignoring the trailing slash can be toggled
with the <code>-ignore-trailing-slash</code> command line flag.</p>
<p><strong>Examples:</strong></p>
<div class="highlight"><pre><span></span><code>Path(&quot;/foo/bar&quot;)     //   /foo/bar
Path(&quot;/foo/bar/&quot;)    //   /foo/bar/, unless started with -ignore-trailing-slash
Path(&quot;/foo/:id&quot;)     //   /foo/_anything
Path(&quot;/foo/:id/baz&quot;) //   /foo/_anything/baz
Path(&quot;/foo/*rest&quot;)   //   /foo/bar/baz
Path(&quot;/foo/**&quot;)      //   /foo/bar/baz
</code></pre></div>
<h3 id="pathsubtree">PathSubtree<a class="headerlink" href="#pathsubtree" title="Permanent link">&para;</a></h3>
<p>The path subtree predicate behaves similar to the path predicate, but it matches the exact path in the
definition and any sub path below it. The subpath is automatically provided among the path parameters with the
name <code>*</code>. If a free wildcard is appended to the definition, e.g. <code>PathSubtree("/some/path/*rest")</code>, the free
wildcard name is used instead of <code>*</code>. The simple wildcards behave similar to the Path predicate. The main
difference between <code>PathSubtree("/foo")</code> and <code>Path("/foo/**")</code> is that the PathSubtree predicate always ignores
the trailing slashes.</p>
<p><strong>Examples:</strong></p>
<div class="highlight"><pre><span></span><code>PathSubtree(&quot;/foo/bar&quot;)
PathSubtree(&quot;/&quot;)
PathSubtree(&quot;/foo/*rest&quot;)
</code></pre></div>
<h3 id="pathregexp">PathRegexp<a class="headerlink" href="#pathregexp" title="Permanent link">&para;</a></h3>
<p>Regular expressions to match the path. It uses Go&rsquo;s standard library
regexp package to match, which is based on
<a href="https://github.com/google/re2/wiki/Syntax">re2 regular expression syntax</a>.</p>
<p>Parameters:</p>
<ul>
<li>PathRegexp (regex)</li>
</ul>
<p>A route can contain more than one PathRegexp predicates. It can be also used in combination with the Path
predicate.</p>
<div class="highlight"><pre><span></span><code>Path(&quot;/colors/:name/rgb-value&quot;) &amp;&amp; PathRegexp(&quot;^/colors/(red|green|blue|cyan|magenta|pink|yellow)/&quot;)
-&gt; returnRGB()
-&gt; &lt;shunt&gt;
</code></pre></div>
<p>Further examples:</p>
<div class="highlight"><pre><span></span><code>PathRegexp(&quot;^/foo/bar&quot;)
PathRegexp(&quot;/foo/bar$&quot;)
PathRegexp(&quot;/foo/bar/&quot;)
PathRegexp(&quot;^/foo/(bar|qux)&quot;)
</code></pre></div>
<h2 id="host">Host<a class="headerlink" href="#host" title="Permanent link">&para;</a></h2>
<p>Regular expressions that the host header in the request must match.</p>
<p>Parameters:</p>
<ul>
<li>Host (regex)</li>
</ul>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code>Host(/^my-host-header\.example\.org$/)
Host(/header\.example\.org$/)
</code></pre></div>
<h2 id="hostany">HostAny<a class="headerlink" href="#hostany" title="Permanent link">&para;</a></h2>
<p>Evaluates to true if request host exactly equals any of the configured hostnames.</p>
<p>Parameters:</p>
<ul>
<li>hostnames (string)</li>
</ul>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code>HostAny(&quot;www.example.org&quot;, &quot;www.example.com&quot;)
HostAny(&quot;localhost:9090&quot;)
</code></pre></div>
<h2 id="forwarded-header-predicates">Forwarded header predicates<a class="headerlink" href="#forwarded-header-predicates" title="Permanent link">&para;</a></h2>
<p>Uses standardized Forwarded header (<a href="https://tools.ietf.org/html/rfc7239">RFC 7239</a>)</p>
<p>More info about the header: <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Forwarded">MDN</a></p>
<p>If multiple proxies chain values in the header, as a comma separated list, the predicates below will only match
the last value in the chain for each part of the header.</p>
<p>Example: Forwarded: host=example.com;proto=https, host=example.org</p>
<ul>
<li><code>ForwardedHost(/^example\.com$/)</code> - does not match</li>
<li><code>ForwardedHost(/^example\.org$/)</code> - matches</li>
<li><code>ForwardedHost(/^example\.org$/) &amp;&amp; ForwardedProto("https")</code> - matches</li>
<li><code>ForwardedHost(/^example\.com$/) &amp;&amp; ForwardedProto("https")</code> - does not match</li>
</ul>
<h3 id="forwardedhost">ForwardedHost<a class="headerlink" href="#forwardedhost" title="Permanent link">&para;</a></h3>
<p>Regular expressions that the forwarded host header in the request must match.</p>
<p>Parameters:</p>
<ul>
<li>Host (regex)</li>
</ul>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code>ForwardedHost(/^my-host-header\.example\.org$/)
ForwardedHost(/header\.example\.org$/)
</code></pre></div>
<h3 id="forwardedprotocol">ForwardedProtocol<a class="headerlink" href="#forwardedprotocol" title="Permanent link">&para;</a></h3>
<p>Protocol the forwarded header in the request must match.</p>
<p>Parameters:</p>
<ul>
<li>Protocol (string)</li>
</ul>
<p>Only &ldquo;http&rdquo; and &ldquo;https&rdquo; values are allowed</p>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code>ForwardedProtocol(&quot;http&quot;)
ForwardedProtocol(&quot;https&quot;)
</code></pre></div>
<h2 id="weight">Weight<a class="headerlink" href="#weight" title="Permanent link">&para;</a></h2>
<p>By default, the weight (priority) of a route is determined by the number of defined predicates.</p>
<p>If you want to give a route more priority, you can give it more weight.</p>
<p>Parameters:</p>
<ul>
<li>Weight (int)</li>
</ul>
<p>Example where <code>route2</code> has more priority because it has more predicates:</p>
<div class="highlight"><pre><span></span><code>route1: Path(&quot;/test&quot;) -&gt; &quot;http://www.zalando.de&quot;;
route2: Path(&quot;/test&quot;) &amp;&amp; True() -&gt; &quot;http://www.zalando.de&quot;;
</code></pre></div>
<p>Example where <code>route1</code> has more priority because it has more weight:</p>
<div class="highlight"><pre><span></span><code>route1: Path(&quot;/test&quot;) &amp;&amp; Weight(100) -&gt; &quot;http://www.zalando.de&quot;;
route2: Path(&quot;/test&quot;) &amp;&amp; True() &amp;&amp; True() -&gt; &quot;http://www.zalando.de&quot;;
</code></pre></div>
<h2 id="true">True<a class="headerlink" href="#true" title="Permanent link">&para;</a></h2>
<p>Does always match. Before <code>Weight</code> predicate existed this was used to give a route more weight.</p>
<p>Example where <code>route2</code> has more weight.</p>
<div class="highlight"><pre><span></span><code>route1: Path(&quot;/test&quot;) -&gt; &quot;http://www.zalando.de&quot;;
route2: Path(&quot;/test&quot;) &amp;&amp; True() -&gt; &quot;http://www.github.com&quot;;
</code></pre></div>
<h2 id="false">False<a class="headerlink" href="#false" title="Permanent link">&para;</a></h2>
<p>Does not match. Can be used to disable certain routes.</p>
<p>Example where <code>route2</code> is disabled.</p>
<div class="highlight"><pre><span></span><code>route1: Path(&quot;/test&quot;) -&gt; &quot;http://www.zalando.de&quot;;
route2: Path(&quot;/test&quot;) &amp;&amp; False() -&gt; &quot;http://www.github.com&quot;;
</code></pre></div>
<h2 id="shutdown">Shutdown<a class="headerlink" href="#shutdown" title="Permanent link">&para;</a></h2>
<p>Evaluates to true if Skipper is shutting down. Can be used to create customized healthcheck.</p>
<div class="highlight"><pre><span></span><code>health_up: Path(&quot;/health&quot;) -&gt; inlineContent(&quot;OK&quot;) -&gt; &lt;shunt&gt;;
health_down: Path(&quot;/health&quot;) &amp;&amp; Shutdown() -&gt; status(503) -&gt; inlineContent(&quot;shutdown&quot;) -&gt; &lt;shunt&gt;;
</code></pre></div>
<h2 id="method">Method<a class="headerlink" href="#method" title="Permanent link">&para;</a></h2>
<p>The HTTP method that the request must match. HTTP methods are one of
GET, HEAD, PATCH, POST, PUT, DELETE, OPTIONS, CONNECT, TRACE.</p>
<p>Parameters:</p>
<ul>
<li>Method (string)</li>
</ul>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code>Method(&quot;GET&quot;)
Method(&quot;OPTIONS&quot;)
</code></pre></div>
<h2 id="methods">Methods<a class="headerlink" href="#methods" title="Permanent link">&para;</a></h2>
<p>The HTTP method that the request must match. HTTP methods are one of
GET, HEAD, PATCH, POST, PUT, DELETE, OPTIONS, CONNECT, TRACE.</p>
<p>Parameters:</p>
<ul>
<li>Method (&hellip;string) methods names</li>
</ul>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code>Methods(&quot;GET&quot;)
Methods(&quot;OPTIONS&quot;, &quot;POST&quot;)
Methods(&quot;OPTIONS&quot;, &quot;POST&quot;, &quot;patch&quot;)
</code></pre></div>
<h2 id="header">Header<a class="headerlink" href="#header" title="Permanent link">&para;</a></h2>
<p>A header key and exact value that must be present in the request. Note
that Header(&ldquo;Key&rdquo;, &ldquo;Value&rdquo;) is equivalent to HeaderRegexp(&ldquo;Key&rdquo;, &ldquo;^Value$&rdquo;).</p>
<p>Parameters:</p>
<ul>
<li>Header (string, string)</li>
</ul>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code>Header(&quot;X-Forwarded-For&quot;, &quot;192.168.0.2&quot;)
Header(&quot;Accept&quot;, &quot;application/json&quot;)
</code></pre></div>
<h2 id="headerregexp">HeaderRegexp<a class="headerlink" href="#headerregexp" title="Permanent link">&para;</a></h2>
<p>A header key and a regular expression, where the key must be present
in the request and one of the associated values must match the
expression.</p>
<p>Parameters:</p>
<ul>
<li>HeaderRegexp (string, regex)</li>
</ul>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code>HeaderRegexp(&quot;X-Forwarded-For&quot;, &quot;^192\.168\.0\.[0-2]?[0-9]?[0-9]&quot;)
HeaderRegexp(&quot;Accept&quot;, &quot;application/(json|xml)&quot;)
</code></pre></div>
<h2 id="cookie">Cookie<a class="headerlink" href="#cookie" title="Permanent link">&para;</a></h2>
<p>Matches if the specified cookie is set in the request.</p>
<p>Parameters:</p>
<ul>
<li>Cookie (string, regex) name and value match</li>
</ul>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code>Cookie(&quot;alpha&quot;, /^enabled$/)
</code></pre></div>
<h2 id="auth">Auth<a class="headerlink" href="#auth" title="Permanent link">&para;</a></h2>
<p>Authorization header based match.</p>
<h3 id="jwtpayloadanykv">JWTPayloadAnyKV<a class="headerlink" href="#jwtpayloadanykv" title="Permanent link">&para;</a></h3>
<p>Match the route if at least one of the base64 decoded JWT content
matches the key value configuration.</p>
<p>Parameters:</p>
<ul>
<li>Key-Value pairs (&hellip;string), odd index is the key of the JWT
  content and even index is the value of the JWT content</li>
</ul>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code>JWTPayloadAnyKV(&quot;iss&quot;, &quot;https://accounts.google.com&quot;)
JWTPayloadAnyKV(&quot;iss&quot;, &quot;https://accounts.google.com&quot;, &quot;email&quot;, &quot;skipper-router@googlegroups.com&quot;)
</code></pre></div>
<h3 id="jwtpayloadallkv">JWTPayloadAllKV<a class="headerlink" href="#jwtpayloadallkv" title="Permanent link">&para;</a></h3>
<p>Match the route if all of the base64 decoded JWT content
matches the key value configuration.</p>
<p>Parameters:</p>
<ul>
<li>Key-Value pairs (&hellip;string), odd index is the key of the JWT
  content and even index is the value of the JWT content</li>
</ul>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code>JWTPayloadAllKV(&quot;iss&quot;, &quot;https://accounts.google.com&quot;)
JWTPayloadAllKV(&quot;iss&quot;, &quot;https://accounts.google.com&quot;, &quot;email&quot;, &quot;skipper-router@googlegroups.com&quot;)
</code></pre></div>
<h3 id="jwtpayloadanykvregexp-jwtpayloadallkvregexp">JWTPayloadAnyKVRegexp, JWTPayloadAllKVRegexp<a class="headerlink" href="#jwtpayloadanykvregexp-jwtpayloadallkvregexp" title="Permanent link">&para;</a></h3>
<p>Behaves exactly the same as <code>JWTPayloadAnyKV</code>, <code>JWTPayloadAllKV</code>,
but the expected values are regular expressions that will be matched
against the JWT value.</p>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code>JWTPayloadAllKVRegexp(&quot;iss&quot;, &quot;^https://&quot;)
JWTPayloadAnyKVRegexp(&quot;iss&quot;, &quot;^https://&quot;)
</code></pre></div>
<h3 id="headersha256">HeaderSHA256<a class="headerlink" href="#headersha256" title="Permanent link">&para;</a></h3>
<p>Matches if SHA-256 hash of the header value (known as <a href="https://en.wikipedia.org/wiki/Pre-shared_key">pre-shared key</a> or secret)
equals any of the configured hash values.
Several hash values could be used to match multiple secrets e.g. during secret rotation.</p>
<p>Hash values only hide secrets from parties that have access to the source of Skipper routes.
Authentication strength depends on the strength of the secret value so e.g.
<code>HeaderSHA256("X-Secret", "2bb80d537b1da3e38bd30361aa855686bde0eacd7162fef6a25fe97bf527a25b")</code>
is not stronger than just <code>Header("X-Secret", "secret")</code>.</p>
<p>The secret value must be kept secret, must be used by a single client and must be rotated periodically.
See below how to generate random secret value using <a href="https://www.openssl.org/docs/man1.1.1/man1/rand.html">OpenSSL</a>.</p>
<p>Parameters:</p>
<ul>
<li>header name (string)</li>
<li>one or more hex-encoded SHA-256 hashes of the matching header values (string)</li>
</ul>
<p>Secure secret value example:
<div class="highlight"><pre><span></span><code><span class="c1">#</span>
<span class="c1"># 1. Generate cryptographically secure pseudo random secret header value:</span>
<span class="c1"># - length of at least 32 bytes (the size of the SHA-256 output)</span>
<span class="c1"># - encode as -base64 or -hex to get ASCII text value</span>
<span class="c1">#</span>
<span class="nv">SECRET</span><span class="o">=</span><span class="k">$(</span>openssl<span class="w"> </span>rand<span class="w"> </span>-base64<span class="w"> </span><span class="m">32</span><span class="k">)</span>
<span class="nb">echo</span><span class="w"> </span><span class="nv">$SECRET</span>
3YchPsliGjBXvyl/ncLWEI8/loKGrj/VNM4garxWEmA<span class="o">=</span>

<span class="c1">#</span>
<span class="c1"># 2. Get SHA-256 hash of the secret header value to use as HeaderSHA256 argument:</span>
<span class="c1"># - use echo -n to not output the trailing newline</span>
<span class="c1">#</span>
<span class="nb">echo</span><span class="w"> </span>-n<span class="w"> </span><span class="nv">$SECRET</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sha256sum
a6131ba920df753c8109500cc11818f7192336d06532f6fa13009c2e4f6e1841<span class="w">  </span>-
</code></pre></div>
<div class="highlight"><pre><span></span><code>// 3. Configure route to match hash of the secret value
HeaderSHA256(
    &quot;X-Secret&quot;,
    &quot;a6131ba920df753c8109500cc11818f7192336d06532f6fa13009c2e4f6e1841&quot;
) -&gt; inlineContent(&quot;ok\n&quot;) -&gt; &lt;shunt&gt;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># 4. Test secret value</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-Secret: </span><span class="nv">$SECRET</span><span class="s2">&quot;</span><span class="w"> </span>http://localhost:9090
</code></pre></div></p>
<p>Secret rotation example:
<div class="highlight"><pre><span></span><code>// To rotate secret:
// * add new secret - both old and new secrets match during rotation
// * update client to use new secret
// * remove old secret
HeaderSHA256(
    &quot;X-Secret&quot;,
    &quot;cba06b5736faf67e54b07b561eae94395e774c517a7d910a54369e1263ccfbd4&quot;, // SHA256(&quot;old&quot;)
    &quot;11507a0e2f5e69d5dfa40a62a1bd7b6ee57e6bcd85c67c9b8431b36fff21c437&quot;  // SHA256(&quot;new&quot;)
) -&gt; inlineContent(&quot;ok\n&quot;) -&gt; &lt;shunt&gt;
</code></pre></div></p>
<p><a href="https://en.wikipedia.org/wiki/Basic_access_authentication">Basic access authentication</a> example:
<div class="highlight"><pre><span></span><code>anon: * -&gt; setResponseHeader(&quot;WWW-Authenticate&quot;, `Basic realm=&quot;foo&quot;, charset=&quot;UTF-8&quot;`) -&gt; status(401) -&gt; &lt;shunt&gt;;
auth: HeaderSHA256(
    &quot;Authorization&quot;,
    &quot;caae07e42ed8d231a58edcde95782b0feb67186172c18c89894ce4c2174df137&quot;, // SHA256(&quot;Basic &quot; + BASE64(&quot;test:123&quot;))
    &quot;157da8472590f0ce0a7c651bd79aecb5cc582944fcf76cbabada915d333deee8&quot;  // SHA256(&quot;Basic &quot; + BASE64(&quot;Aladdin:open sesame&quot;))
) -&gt; inlineContent(&quot;ok\n&quot;) -&gt; &lt;shunt&gt;;
</code></pre></div></p>
<h2 id="interval">Interval<a class="headerlink" href="#interval" title="Permanent link">&para;</a></h2>
<p>An interval implements custom predicates to match routes only during some period of time.</p>
<p>There are three predicates: Between, Before and After. All
predicates can be created using the date represented as:
* a string in RFC3339 format (see <a href="https://golang.org/pkg/time/#pkg-constants">https://golang.org/pkg/time/#pkg-constants</a>)
* a string in RFC3339 format without numeric timezone offset and a location name corresponding to a file in the IANA Time Zone database
* an <code>int64</code> or <code>float64</code> number corresponding to the given Unix time in seconds since January 1, 1970 UTC. <code>float64</code> number will be converted into <code>int64</code> number</p>
<h3 id="after">After<a class="headerlink" href="#after" title="Permanent link">&para;</a></h3>
<p>Matches if the request is after the specified time</p>
<p>Parameters:</p>
<ul>
<li>After (string) RFC3339 datetime string</li>
<li>After (string, string) RFC3339 datetime string without timezone offset, location name</li>
<li>After (int) unixtime in seconds</li>
</ul>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code>After(&quot;2016-01-01T12:00:00+02:00&quot;)
After(&quot;2021-02-18T00:00:00&quot;, &quot;Europe/Berlin&quot;)
After(1451642400)
</code></pre></div>
<h3 id="before">Before<a class="headerlink" href="#before" title="Permanent link">&para;</a></h3>
<p>Matches if the request is before the specified time</p>
<p>Parameters:</p>
<ul>
<li>Before (string) RFC3339 datetime string</li>
<li>Before (string, string) RFC3339 datetime string without timezone offset, location name</li>
<li>Before (int) unixtime in seconds</li>
</ul>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code>Before(&quot;2016-01-01T12:00:00+02:00&quot;)
Before(&quot;2021-02-18T00:00:00&quot;, &quot;Europe/Berlin&quot;)
Before(1451642400)
</code></pre></div>
<h3 id="between">Between<a class="headerlink" href="#between" title="Permanent link">&para;</a></h3>
<p>Matches if the request is between the specified timeframe</p>
<p>Parameters:</p>
<ul>
<li>Between (string, string) RFC3339 datetime string, from - till</li>
<li>Between (string, string, string) RFC3339 datetime string without timezone offset, from - till and a location name</li>
<li>Between (int, int) unixtime in seconds, from - till</li>
</ul>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code>Between(&quot;2016-01-01T12:00:00+02:00&quot;, &quot;2016-02-01T12:00:00+02:00&quot;)
Between(&quot;2021-02-18T00:00:00&quot;, &quot;2021-02-18T01:00:00&quot;, &quot;Europe/Berlin&quot;)
Between(1451642400, 1454320800)
</code></pre></div>
<h2 id="cron">Cron<a class="headerlink" href="#cron" title="Permanent link">&para;</a></h2>
<p>Matches routes when the given cron-like expression matches the system time.</p>
<p>Parameters:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Cron#CRON_expression">Cron</a>-like expression. See <a href="https://pkg.go.dev/github.com/sarslanhan/cronmask#New">the package documentation</a> for supported &amp; unsupported features. Expressions are expected to be in the same time zone as the system that generates the <code>time.Time</code> instances.</li>
</ul>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code>// match everything
Cron(&quot;* * * * *&quot;)
// match only when the hour is between 5-7 (inclusive)
Cron(&quot;* 5-7, * * *&quot;)
// match only when the hour is between 5-7, equal to 8, or between 12-15
Cron(&quot;* 5-7,8,12-15 * * *&quot;)
// match only when it is weekdays
Cron(&quot;* * * * 1-5&quot;)
// match only when it is weekdays &amp; working hours
Cron(&quot;* 7-18 * * 1-5&quot;)
</code></pre></div>
<h2 id="queryparam">QueryParam<a class="headerlink" href="#queryparam" title="Permanent link">&para;</a></h2>
<p>Match request based on the Query Params in URL</p>
<p>Parameters:</p>
<ul>
<li>QueryParam (string) name</li>
<li>QueryParam (string, regex) name and value match</li>
</ul>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code>// matches http://example.org?bb=a&amp;query=withvalue
QueryParam(&quot;query&quot;)

// Even a query param without a value
// matches http://example.org?bb=a&amp;query=
QueryParam(&quot;query&quot;)

// matches with regexp
// matches http://example.org?bb=a&amp;query=example
QueryParam(&quot;query&quot;, &quot;^example$&quot;)

// matches with regexp and multiple values of query param
// matches http://example.org?bb=a&amp;query=testing&amp;query=example
QueryParam(&quot;query&quot;, &quot;^example$&quot;)
</code></pre></div>
<h2 id="source">Source<a class="headerlink" href="#source" title="Permanent link">&para;</a></h2>
<p>Source implements a custom predicate to match routes based on
the source IP or X-Forwarded-For header of a request.</p>
<p>Parameters:</p>
<ul>
<li>Source (string, ..) varargs with IPs or CIDR</li>
</ul>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code>// only match requests from 1.2.3.4
Source(&quot;1.2.3.4&quot;)

// only match requests from 1.2.3.0 - 1.2.3.255
Source(&quot;1.2.3.0/24&quot;)

// only match requests from 1.2.3.4 and the 2.2.2.0/24 network
Source(&quot;1.2.3.4&quot;, &quot;2.2.2.0/24&quot;)
</code></pre></div>
<h3 id="sourcefromlast">SourceFromLast<a class="headerlink" href="#sourcefromlast" title="Permanent link">&para;</a></h3>
<p>The same as <a href="#source">Source</a>, but use the last part of the
X-Forwarded-For header to match the network. This seems to be only
used in the popular loadbalancers from AWS, ELB and ALB, because they
put the client-IP as last part of the X-Forwarded-For headers.</p>
<p>Parameters:</p>
<ul>
<li>SourceFromLast (string, ..) varargs with IPs or CIDR</li>
</ul>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code>SourceFromLast(&quot;1.2.3.4&quot;, &quot;2.2.2.0/24&quot;)
</code></pre></div>
<h2 id="clientip">ClientIP<a class="headerlink" href="#clientip" title="Permanent link">&para;</a></h2>
<p>ClientIP implements a custom predicate to match routes based on
the client IP of a request.</p>
<p>Parameters:</p>
<ul>
<li>ClientIP (string, ..) varargs with IPs or CIDR</li>
</ul>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code>// only match requests from 1.2.3.4
ClientIP(&quot;1.2.3.4&quot;)

// only match requests from 1.2.3.0 - 1.2.3.255
ClientIP(&quot;1.2.3.0/24&quot;)

// only match requests from 1.2.3.4 and the 2.2.2.0/24 network
ClientIP(&quot;1.2.3.4&quot;, &quot;2.2.2.0/24&quot;)
</code></pre></div>
<h2 id="tee">Tee<a class="headerlink" href="#tee" title="Permanent link">&para;</a></h2>
<p>The Tee predicate matches a route when a request is spawn from the
<a href="../filters/#teeloopback">teeLoopback</a> filter as a tee request, using
the same provided label.</p>
<p>Parameters:</p>
<ul>
<li>tee label (string): the predicate will match only those requests that
  were spawn from a teeLoopback filter using the same label.</li>
</ul>
<p>See also:</p>
<ul>
<li><a href="../filters/#teeloopback">teeLoopback filter</a></li>
<li><a href="../../tutorials/shadow-traffic/">Shadow Traffic Tutorial</a></li>
</ul>
<h2 id="traffic">Traffic<a class="headerlink" href="#traffic" title="Permanent link">&para;</a></h2>
<p>Traffic implements a predicate to control the matching probability for
a given route by setting its weight.</p>
<p>The probability for matching a route is defined by the mandatory first
parameter, that must be a decimal number between 0.0 and 1.0 (both
inclusive).</p>
<p>The optional second argument is used to specify the cookie name for
the traffic group, in case you want to use stickiness. Stickiness
allows all subsequent requests from the same client to match the same
route. Stickiness of traffic is supported by the optional third
parameter, indicating whether the request being matched belongs to the
traffic group of the current route. If yes, the predicate matches
ignoring the chance argument.</p>
<p>Parameters:</p>
<ul>
<li>Traffic (decimal) valid values [0.0, 1.0]</li>
<li>Traffic (decimal, string, string) session stickiness</li>
</ul>
<p>Examples:</p>
<p>non-sticky:</p>
<div class="highlight"><pre><span></span><code>// hit by 10% percent chance
v2:
    Traffic(.1) -&gt;
    &quot;https://api-test-green&quot;;

// hit by remaining chance
v1:
    * -&gt;
    &quot;https://api-test-blue&quot;;
</code></pre></div>
<p>stickiness:</p>
<div class="highlight"><pre><span></span><code>// hit by 5% percent chance
cartTest:
    Traffic(.05, &quot;cart-test&quot;, &quot;test&quot;) &amp;&amp; Path(&quot;/cart&quot;) -&gt;
    responseCookie(&quot;cart-test&quot;, &quot;test&quot;) -&gt;
    &quot;https://cart-test&quot;;

// hit by remaining chance
cart:
    Path(&quot;/cart&quot;) -&gt;
    responseCookie(&quot;cart-test&quot;, &quot;default&quot;) -&gt;
    &quot;https://cart&quot;;

// hit by 15% percent chance
catalogTestA:
    Traffic(.15, &quot;catalog-test&quot;, &quot;A&quot;) -&gt;
    responseCookie(&quot;catalog-test&quot;, &quot;A&quot;) -&gt;
    &quot;https://catalog-test-a&quot;;

// hit by 30% percent chance
catalogTestB:
    Traffic(.3, &quot;catalog-test&quot;, &quot;B&quot;) -&gt;
    responseCookie(&quot;catalog-test&quot;, &quot;B&quot;) -&gt;
    &quot;https://catalog-test-b&quot;;

// hit by remaining chance
catalog:
    * -&gt;
    responseCookie(&quot;catalog-test&quot;, &quot;default&quot;) -&gt;
    &quot;https://catalog&quot;;
</code></pre></div>
<h2 id="trafficsegment">TrafficSegment<a class="headerlink" href="#trafficsegment" title="Permanent link">&para;</a></h2>
<p>TrafficSegment predicate requires two number arguments <span class="arithmatex">\(min\)</span> and <span class="arithmatex">\(max\)</span>
from an interval <span class="arithmatex">\([0, 1]\)</span> (from zero included to one included) and <span class="arithmatex">\(min &lt;= max\)</span>.</p>
<p>Let <span class="arithmatex">\(r\)</span> be one-per-request uniform random number value from <span class="arithmatex">\([0, 1)\)</span>.
TrafficSegment matches if <span class="arithmatex">\(r\)</span> belongs to an interval from <span class="arithmatex">\([min, max)\)</span>.
Upper interval boundary <span class="arithmatex">\(max\)</span> is excluded to simplify definition of
adjacent intervals - the upper boundary of the first interval
then equals lower boundary of the next and so on, e.g. <span class="arithmatex">\([0, 0.25)\)</span> and <span class="arithmatex">\([0.25, 1)\)</span>.</p>
<p>This predicate has weight of -1 and therefore does not affect route weight.</p>
<p>Parameters:</p>
<ul>
<li>min (decimal) from an interval [0, 1]</li>
<li>max (decimal) from an interval [0, 1], min &lt;= max</li>
</ul>
<p>Example of routes splitting traffic in 50%+30%+20% proportion:</p>
<div class="highlight"><pre><span></span><code>r50: Path(&quot;/test&quot;) &amp;&amp; TrafficSegment(0.0, 0.5) -&gt; &lt;shunt&gt;;
r30: Path(&quot;/test&quot;) &amp;&amp; TrafficSegment(0.5, 0.8) -&gt; &lt;shunt&gt;;
r20: Path(&quot;/test&quot;) &amp;&amp; TrafficSegment(0.8, 1.0) -&gt; &lt;shunt&gt;;
</code></pre></div>
<h2 id="contentlengthbetween">ContentLengthBetween<a class="headerlink" href="#contentlengthbetween" title="Permanent link">&para;</a></h2>
<p>The ContentLengthBetween predicate matches a route when a request content length header value is between min and max provided values.
In case the client does not specify the content length value then the predicate will not match.</p>
<p>Parameters:</p>
<ul>
<li>min (int): the lower bound (inclusive) for the content length check. The value must be greater than or equal to 0.</li>
<li>max (int): the upper bound (exclusive) for the content length check. The value must be greater than <code>min</code>.</li>
</ul>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code>// matches the range from 0 to 999
ContentLengthBetween(0, 1000)

// matches the range from 1000 to 9999
ContentLengthBetween(1000, 10000)
</code></pre></div>
<h2 id="opentelemetry-otel">OpenTelemetry - OTel<a class="headerlink" href="#opentelemetry-otel" title="Permanent link">&para;</a></h2>
<p><a href="https://opentelemetry.io/">OpenTelemetry</a> (short OTel) based
predicates are able to match based on OTel data.</p>
<h3 id="otelbaggage">OTelBaggage<a class="headerlink" href="#otelbaggage" title="Permanent link">&para;</a></h3>
<p>OpenTelemetry defined Baggage as <a href="https://www.w3.org/TR/baggage/">W3C spec</a>.
OTelBaggage predicate is able to match the Baggage item by key.</p>
<p>The example matches the key of a baggage item key <code>foo</code> whatever the baggage item value or property is:</p>
<div class="highlight"><pre><span></span><code>OTelBaggage(&quot;foo&quot;)
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>