
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://opensource.zalando.com/skipper/reference/backends/">
      
      
        <link rel="prev" href="../predicates/">
      
      
        <link rel="next" href="../egress/">
      
      
        
      
      
      <link rel="icon" href="../../favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.3">
    
    
      
        <title>Backends - Skipper</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#network-backend" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Skipper" class="md-header__button md-logo" aria-label="Skipper" data-md-component="logo">
      
  <img src="../../skipper-h180.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Skipper
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Backends
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/zalando/skipper/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Skipper" class="md-nav__button md-logo" aria-label="Skipper" data-md-component="logo">
      
  <img src="../../skipper-h180.png" alt="logo">

    </a>
    Skipper
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/zalando/skipper/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../filters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Filters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../predicates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Predicates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Backends
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Backends
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#network-backend" class="md-nav__link">
    <span class="md-ellipsis">
      
        Network backend
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shunt-backend" class="md-nav__link">
    <span class="md-ellipsis">
      
        Shunt backend
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loopback-backend" class="md-nav__link">
    <span class="md-ellipsis">
      
        Loopback backend
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dynamic-backend" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dynamic backend
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forward-backend" class="md-nav__link">
    <span class="md-ellipsis">
      
        Forward backend
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-balancer-backend" class="md-nav__link">
    <span class="md-ellipsis">
      
        Load Balancer backend
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backend-protocols" class="md-nav__link">
    <span class="md-ellipsis">
      
        Backend Protocols
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../egress/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Egress
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../scripts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scripts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Plugins
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../routing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Routing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_10" >
        
          
          <label class="md-nav__link" for="__nav_2_10" id="__nav_2_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Data Clients
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data Clients
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-clients/eskip-file/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Eskip File
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-clients/eskip-remote/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Remote Eskip
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-clients/route-string/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Route String
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-clients/kubernetes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kubernetes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-clients/etcd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Etcd
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_11" >
        
          
          <label class="md-nav__link" for="__nav_2_11" id="__nav_2_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Operation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    Operation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation/deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation/operation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Operation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Kubernetes
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Kubernetes
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/ingress-controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ingress Controller Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/ingress-usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ingress Usage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/ingress-backends/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ingress Backends
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/routegroups/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RouteGroups
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/routegroup-crd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RouteGroup CRD Semantics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/routegroup-validation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RouteGroup Validation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/east-west-usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    East-West aka svc-to-svc
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/external-addresses/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    External Addresses aka External Name
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/migrate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Migration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Tutorials
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tutorials
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Basics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/common-use-cases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Common Use Cases
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication and Authorization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/ratelimit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ratelimits
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/shadow-traffic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Shadow Traffic
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Operations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/built-your-own/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Built Your Own Proxy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#network-backend" class="md-nav__link">
    <span class="md-ellipsis">
      
        Network backend
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shunt-backend" class="md-nav__link">
    <span class="md-ellipsis">
      
        Shunt backend
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loopback-backend" class="md-nav__link">
    <span class="md-ellipsis">
      
        Loopback backend
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dynamic-backend" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dynamic backend
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forward-backend" class="md-nav__link">
    <span class="md-ellipsis">
      
        Forward backend
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-balancer-backend" class="md-nav__link">
    <span class="md-ellipsis">
      
        Load Balancer backend
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backend-protocols" class="md-nav__link">
    <span class="md-ellipsis">
      
        Backend Protocols
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Backends</h1>

<p>A backend is the last part of a route and will define the backend to
call for a given request that match the route.</p>
<p>Generic route example:</p>
<div class="highlight"><pre><span></span><code>routeID: Predicate1 &amp;&amp; Predicate2 -&gt; filter1 -&gt; filter2 -&gt; &lt;backend&gt;;
</code></pre></div>
<h2 id="network-backend">Network backend<a class="headerlink" href="#network-backend" title="Permanent link">&para;</a></h2>
<p>A network backend is an arbitrary HTTP or HTTPS URL, that will be
called by the proxy.</p>
<p>Route example with a network backend <code>"https://www.zalando.de/"</code>:
<div class="highlight"><pre><span></span><code>r0: Method(&quot;GET&quot;)
    -&gt; setRequestHeader(&quot;X-Passed-Skipper&quot;, &quot;true&quot;)
    -&gt; &quot;https://www.zalando.de/&quot;;
</code></pre></div></p>
<p>Proxy example with request in access log
<div class="highlight"><pre><span></span><code>./bin/skipper<span class="w"> </span>-inline-routes<span class="w"> </span><span class="s1">&#39;r0: Method(&quot;GET&quot;) -&gt; setRequestHeader(&quot;X-Passed-Skipper&quot;, &quot;true&quot;) -&gt; &quot;https://www.zalando.de/&quot;;&#39;</span>
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>Expose<span class="w"> </span>metrics<span class="w"> </span><span class="k">in</span><span class="w"> </span>codahale<span class="w"> </span>format
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>support<span class="w"> </span>listener<span class="w"> </span>on<span class="w"> </span>:9911
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>proxy<span class="w"> </span>listener<span class="w"> </span>on<span class="w"> </span>:9090
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>TLS<span class="w"> </span>settings<span class="w"> </span>not<span class="w"> </span>found,<span class="w"> </span>defaulting<span class="w"> </span>to<span class="w"> </span>HTTP
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>route<span class="w"> </span>settings,<span class="w"> </span>reset,<span class="w"> </span>route:<span class="w"> </span>r0:<span class="w"> </span>Method<span class="o">(</span><span class="s2">&quot;GET&quot;</span><span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>setRequestHeader<span class="o">(</span><span class="s2">&quot;X-Passed-Skipper&quot;</span>,<span class="w"> </span><span class="s2">&quot;true&quot;</span><span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="s2">&quot;https://www.zalando.de/&quot;</span>
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>route<span class="w"> </span>settings<span class="w"> </span>received
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>route<span class="w"> </span>settings<span class="w"> </span>applied

::1<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span><span class="o">[</span><span class="m">05</span>/Feb/2019:14:31:05<span class="w"> </span>+0100<span class="o">]</span><span class="w"> </span><span class="s2">&quot;GET / HTTP/1.1&quot;</span><span class="w"> </span><span class="m">200</span><span class="w"> </span><span class="m">164408</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="w"> </span><span class="s2">&quot;curl/7.49.0&quot;</span><span class="w"> </span><span class="m">457</span><span class="w"> </span>localhost:9090<span class="w"> </span>-<span class="w"> </span>-
</code></pre></div></p>
<p>Client example with request and response headers:
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>curl<span class="w"> </span>-v<span class="w"> </span>localhost:9090<span class="w"> </span>&gt;/dev/null
*<span class="w"> </span>Rebuilt<span class="w"> </span>URL<span class="w"> </span>to:<span class="w"> </span>localhost:9090/
*<span class="w">   </span>Trying<span class="w"> </span>::1...
*<span class="w"> </span>Connected<span class="w"> </span>to<span class="w"> </span>localhost<span class="w"> </span><span class="o">(</span>::1<span class="o">)</span><span class="w"> </span>port<span class="w"> </span><span class="m">9090</span><span class="w"> </span><span class="o">(</span><span class="c1">#0)</span>
&gt;<span class="w"> </span>GET<span class="w"> </span>/<span class="w"> </span>HTTP/1.1
&gt;<span class="w"> </span>Host:<span class="w"> </span>localhost:9090
&gt;<span class="w"> </span>User-Agent:<span class="w"> </span>curl/7.49.0
&gt;<span class="w"> </span>Accept:<span class="w"> </span>*/*
&gt;
&lt;<span class="w"> </span>HTTP/1.1<span class="w"> </span><span class="m">200</span><span class="w"> </span>OK
&lt;<span class="w"> </span>Cache-Control:<span class="w"> </span>no-cache,<span class="w"> </span>no-store,<span class="w"> </span>must-revalidate
&lt;<span class="w"> </span>Content-Type:<span class="w"> </span>text/html
&lt;<span class="w"> </span>Date:<span class="w"> </span>Tue,<span class="w"> </span><span class="m">05</span><span class="w"> </span>Feb<span class="w"> </span><span class="m">2019</span><span class="w"> </span><span class="m">13</span>:31:38<span class="w"> </span>GMT
&lt;<span class="w"> </span>Link:<span class="w"> </span>&lt;https://mosaic01.ztat.net/base-assets/require-2.1.22.min.js&gt;<span class="p">;</span><span class="w"> </span><span class="nv">rel</span><span class="o">=</span><span class="s2">&quot;preload&quot;</span><span class="p">;</span><span class="w"> </span><span class="nv">as</span><span class="o">=</span><span class="s2">&quot;script&quot;</span><span class="p">;</span><span class="w"> </span>nopush<span class="p">;</span><span class="w"> </span>crossorigin
&lt;<span class="w"> </span>Pragma:<span class="w"> </span>no-cache
&lt;<span class="w"> </span>Server:<span class="w"> </span>Skipper
&lt;<span class="w"> </span>Set-Cookie:<span class="w"> </span>...<span class="p">;</span><span class="w"> </span><span class="nv">Path</span><span class="o">=</span>/<span class="p">;</span><span class="w"> </span><span class="nv">Domain</span><span class="o">=</span>zalando.de<span class="p">;</span><span class="w"> </span><span class="nv">Expires</span><span class="o">=</span>Sun,<span class="w"> </span><span class="m">04</span><span class="w"> </span>Aug<span class="w"> </span><span class="m">2019</span><span class="w"> </span><span class="m">13</span>:31:38<span class="w"> </span>GMT<span class="p">;</span><span class="w"> </span>Max-Age<span class="o">=</span><span class="m">15552000</span><span class="p">;</span><span class="w"> </span>HttpOnly<span class="p">;</span><span class="w"> </span>Secure
&lt;<span class="w"> </span>Vary:<span class="w"> </span>Accept-Encoding
&lt;<span class="w"> </span>Transfer-Encoding:<span class="w"> </span>chunked
&lt;
<span class="o">{</span><span class="w"> </span><span class="o">[</span><span class="m">3205</span><span class="w"> </span>bytes<span class="w"> </span>data<span class="o">]</span>
</code></pre></div></p>
<h2 id="shunt-backend">Shunt backend<a class="headerlink" href="#shunt-backend" title="Permanent link">&para;</a></h2>
<p>A shunt backend, <code>&lt;shunt&gt;</code>, will not call a backend, but reply directly from the
proxy itself. This can be used to shortcut, for example have a default
that replies with 404 or use skipper as a backend serving static
content in demos.</p>
<p>Route Example proxying to <code>"https://www.zalando.de/"</code> when Host
header is set to <code>"zalando"</code> and rest will be served HTTP status code
<code>404</code> with the body <code>"no matching route"</code>:</p>
<div class="highlight"><pre><span></span><code>r0: Host(&quot;zalando&quot;)
    -&gt; &quot;https://www.zalando.de/&quot;;
rest: *
      -&gt; status(404)
      -&gt; inlineContent(&quot;no matching route&quot;)
      -&gt; &lt;shunt&gt;;
</code></pre></div>
<p>Proxy configured as defined above with access log showing 404:
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>./bin/skipper<span class="w"> </span>-inline-routes<span class="w"> </span><span class="s1">&#39;r0: Host(&quot;zalando&quot;) -&gt; &quot;https://www.zalando.de/&quot;; rest: * -&gt; status(404) -&gt; inlineContent(&quot;no matching route&quot;)  -&gt; &quot;http://localhost:9999/&quot;;&#39;</span>
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>Expose<span class="w"> </span>metrics<span class="w"> </span><span class="k">in</span><span class="w"> </span>codahale<span class="w"> </span>format
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>support<span class="w"> </span>listener<span class="w"> </span>on<span class="w"> </span>:9911
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>proxy<span class="w"> </span>listener<span class="w"> </span>on<span class="w"> </span>:9090
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>TLS<span class="w"> </span>settings<span class="w"> </span>not<span class="w"> </span>found,<span class="w"> </span>defaulting<span class="w"> </span>to<span class="w"> </span>HTTP
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>route<span class="w"> </span>settings,<span class="w"> </span>reset,<span class="w"> </span>route:<span class="w"> </span>r0:<span class="w"> </span>Host<span class="o">(</span>/zalando/<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="s2">&quot;https://www.zalando.de/&quot;</span>
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>route<span class="w"> </span>settings,<span class="w"> </span>reset,<span class="w"> </span>route:<span class="w"> </span>rest:<span class="w"> </span>*<span class="w"> </span>-&gt;<span class="w"> </span>status<span class="o">(</span><span class="m">404</span><span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>inlineContent<span class="o">(</span><span class="s2">&quot;no matching route&quot;</span><span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="s2">&quot;http://localhost:9999/&quot;</span>
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>route<span class="w"> </span>settings<span class="w"> </span>received
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>route<span class="w"> </span>settings<span class="w"> </span>applied
::1<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span><span class="o">[</span><span class="m">05</span>/Feb/2019:14:39:26<span class="w"> </span>+0100<span class="o">]</span><span class="w"> </span><span class="s2">&quot;GET / HTTP/1.1&quot;</span><span class="w"> </span><span class="m">404</span><span class="w"> </span><span class="m">17</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="w"> </span><span class="s2">&quot;curl/7.49.0&quot;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>localhost:9090<span class="w"> </span>-<span class="w"> </span>-
</code></pre></div></p>
<p>Client example with request and response headers:
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>curl<span class="w"> </span>-sv<span class="w"> </span>localhost:9090
*<span class="w"> </span>Rebuilt<span class="w"> </span>URL<span class="w"> </span>to:<span class="w"> </span>localhost:9090/
*<span class="w">   </span>Trying<span class="w"> </span>::1...
*<span class="w"> </span>Connected<span class="w"> </span>to<span class="w"> </span>localhost<span class="w"> </span><span class="o">(</span>::1<span class="o">)</span><span class="w"> </span>port<span class="w"> </span><span class="m">9090</span><span class="w"> </span><span class="o">(</span><span class="c1">#0)</span>
&gt;<span class="w"> </span>GET<span class="w"> </span>/<span class="w"> </span>HTTP/1.1
&gt;<span class="w"> </span>Host:<span class="w"> </span>localhost:9090
&gt;<span class="w"> </span>User-Agent:<span class="w"> </span>curl/7.49.0
&gt;<span class="w"> </span>Accept:<span class="w"> </span>*/*
&gt;
&lt;<span class="w"> </span>HTTP/1.1<span class="w"> </span><span class="m">404</span><span class="w"> </span>Not<span class="w"> </span>Found
&lt;<span class="w"> </span>Content-Length:<span class="w"> </span><span class="m">17</span>
&lt;<span class="w"> </span>Content-Type:<span class="w"> </span>text/plain<span class="p">;</span><span class="w"> </span><span class="nv">charset</span><span class="o">=</span>utf-8
&lt;<span class="w"> </span>Server:<span class="w"> </span>Skipper
&lt;<span class="w"> </span>Date:<span class="w"> </span>Tue,<span class="w"> </span><span class="m">05</span><span class="w"> </span>Feb<span class="w"> </span><span class="m">2019</span><span class="w"> </span><span class="m">13</span>:37:27<span class="w"> </span>GMT
&lt;
*<span class="w"> </span>Connection<span class="w"> </span><span class="c1">#0 to host localhost left intact</span>
no<span class="w"> </span>matching<span class="w"> </span>route
</code></pre></div></p>
<h2 id="loopback-backend">Loopback backend<a class="headerlink" href="#loopback-backend" title="Permanent link">&para;</a></h2>
<p>The loopback backend, <code>&lt;loopback&gt;</code>, will lookup again the routing
table to a better matching route after processing the current route.
Like this you can add some headers or change the request path for some
specific matching requests.</p>
<p>Example:</p>
<ul>
<li>Route <code>r0</code> is a route with loopback backend that will be matched for requests with paths that start with <code>/api</code>. The route will modify the http request removing /api in the path of the incoming request. In the second step of the routing, the modified request will be matched by route <code>r1</code>.</li>
<li>Route <code>r1</code> is a default route with a network backend to call <code>"https://www.zalando.de/"</code></li>
</ul>
<div class="highlight"><pre><span></span><code>r0: PathSubtree(&quot;/api&quot;)
    -&gt; modPath(&quot;^/api&quot;, &quot;&quot;)
    -&gt; &lt;loopback&gt;;
r1: * -&gt; &quot;https://www.zalando.de/&quot;;
</code></pre></div>
<p>Proxy configured as defined above with access logs showing 404 for the first call and 200 for the second:
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>./bin/skipper<span class="w"> </span>-inline-routes<span class="w"> </span><span class="s1">&#39;r0: PathSubtree(&quot;/api&quot;) -&gt; setRequestHeader(&quot;X-Passed-Skipper&quot;, &quot;true&quot;) -&gt; modPath(/^\/api/, &quot;&quot;) -&gt; &lt;loopback&gt;;</span>
<span class="s1">r1: * -&gt; &quot;https://www.zalando.de/&quot;;&#39;</span>
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>Expose<span class="w"> </span>metrics<span class="w"> </span><span class="k">in</span><span class="w"> </span>codahale<span class="w"> </span>format
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>route<span class="w"> </span>settings,<span class="w"> </span>reset,<span class="w"> </span>route:<span class="w"> </span>r0:<span class="w"> </span>PathSubtree<span class="o">(</span><span class="s2">&quot;/api&quot;</span><span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>setRequestHeader<span class="o">(</span><span class="s2">&quot;X-Passed-Skipper&quot;</span>,<span class="w"> </span><span class="s2">&quot;true&quot;</span><span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>modPath<span class="o">(</span><span class="s2">&quot;^/api&quot;</span>,<span class="w"> </span><span class="s2">&quot;&quot;</span><span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>&lt;loopback&gt;
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>route<span class="w"> </span>settings,<span class="w"> </span>reset,<span class="w"> </span>route:<span class="w"> </span>r1:<span class="w"> </span>*<span class="w"> </span>-&gt;<span class="w"> </span><span class="s2">&quot;https://www.zalando.de/&quot;</span>
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>route<span class="w"> </span>settings<span class="w"> </span>received
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>route<span class="w"> </span>settings<span class="w"> </span>applied
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>support<span class="w"> </span>listener<span class="w"> </span>on<span class="w"> </span>:9911
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>proxy<span class="w"> </span>listener<span class="w"> </span>on<span class="w"> </span>:9090
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>TLS<span class="w"> </span>settings<span class="w"> </span>not<span class="w"> </span>found,<span class="w"> </span>defaulting<span class="w"> </span>to<span class="w"> </span>HTTP
::1<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span><span class="o">[</span><span class="m">05</span>/Feb/2019:14:54:14<span class="w"> </span>+0100<span class="o">]</span><span class="w"> </span><span class="s2">&quot;GET /api/foo HTTP/1.1&quot;</span><span class="w"> </span><span class="m">404</span><span class="w"> </span><span class="m">98348</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="w"> </span><span class="s2">&quot;curl/7.49.0&quot;</span><span class="w"> </span><span class="m">562</span><span class="w"> </span>localhost:9090<span class="w"> </span>-<span class="w"> </span>-
::1<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span><span class="o">[</span><span class="m">05</span>/Feb/2019:14:54:28<span class="w"> </span>+0100<span class="o">]</span><span class="w"> </span><span class="s2">&quot;GET /api HTTP/1.1&quot;</span><span class="w"> </span><span class="m">200</span><span class="w"> </span><span class="m">164408</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="w"> </span><span class="s2">&quot;curl/7.49.0&quot;</span><span class="w"> </span><span class="m">120</span><span class="w"> </span>localhost:9090<span class="w"> </span>-<span class="w"> </span>-
</code></pre></div></p>
<p>Client example with request and response headers:
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>curl<span class="w"> </span>-sv<span class="w"> </span>localhost:9090/api/foo<span class="w"> </span>&gt;/dev/null
*<span class="w">   </span>Trying<span class="w"> </span>::1...
*<span class="w"> </span>Connected<span class="w"> </span>to<span class="w"> </span>localhost<span class="w"> </span><span class="o">(</span>::1<span class="o">)</span><span class="w"> </span>port<span class="w"> </span><span class="m">9090</span><span class="w"> </span><span class="o">(</span><span class="c1">#0)</span>
&gt;<span class="w"> </span>GET<span class="w"> </span>/api/foo<span class="w"> </span>HTTP/1.1
&gt;<span class="w"> </span>Host:<span class="w"> </span>localhost:9090
&gt;<span class="w"> </span>User-Agent:<span class="w"> </span>curl/7.49.0
&gt;<span class="w"> </span>Accept:<span class="w"> </span>*/*
&gt;
&lt;<span class="w"> </span>HTTP/1.1<span class="w"> </span><span class="m">404</span><span class="w"> </span>Not<span class="w"> </span>Found
&lt;<span class="w"> </span>Content-Language:<span class="w"> </span>de-DE
&lt;<span class="w"> </span>Content-Type:<span class="w"> </span>text/html<span class="p">;</span><span class="nv">charset</span><span class="o">=</span>UTF-8
&lt;<span class="w"> </span>Date:<span class="w"> </span>Tue,<span class="w"> </span><span class="m">05</span><span class="w"> </span>Feb<span class="w"> </span><span class="m">2019</span><span class="w"> </span><span class="m">14</span>:00:33<span class="w"> </span>GMT
&lt;<span class="w"> </span>Transfer-Encoding:<span class="w"> </span>chunked
&lt;
<span class="o">{</span><span class="w"> </span><span class="o">[</span><span class="m">2669</span><span class="w"> </span>bytes<span class="w"> </span>data<span class="o">]</span>
*<span class="w"> </span>Connection<span class="w"> </span><span class="c1">#0 to host localhost left intact</span>


$<span class="w"> </span>curl<span class="w"> </span>-sv<span class="w"> </span>localhost:9090/api<span class="w"> </span>&gt;/dev/null
*<span class="w">   </span>Trying<span class="w"> </span>::1...
*<span class="w"> </span>Connected<span class="w"> </span>to<span class="w"> </span>localhost<span class="w"> </span><span class="o">(</span>::1<span class="o">)</span><span class="w"> </span>port<span class="w"> </span><span class="m">9090</span><span class="w"> </span><span class="o">(</span><span class="c1">#0)</span>
&gt;<span class="w"> </span>GET<span class="w"> </span>/api<span class="w"> </span>HTTP/1.1
&gt;<span class="w"> </span>Host:<span class="w"> </span>localhost:9090
&gt;<span class="w"> </span>User-Agent:<span class="w"> </span>curl/7.49.0
&gt;<span class="w"> </span>Accept:<span class="w"> </span>*/*
&gt;
&lt;<span class="w"> </span>HTTP/1.1<span class="w"> </span><span class="m">200</span><span class="w"> </span>OK
&lt;<span class="w"> </span>Cache-Control:<span class="w"> </span>no-cache,<span class="w"> </span>no-store,<span class="w"> </span>must-revalidate
&lt;<span class="w"> </span>Content-Type:<span class="w"> </span>text/html
&lt;<span class="w"> </span>Date:<span class="w"> </span>Tue,<span class="w"> </span><span class="m">05</span><span class="w"> </span>Feb<span class="w"> </span><span class="m">2019</span><span class="w"> </span><span class="m">14</span>:00:44<span class="w"> </span>GMT
&lt;<span class="w"> </span>Link:<span class="w"> </span>&lt;https://mosaic01.ztat.net/base-assets/require-2.1.22.min.js&gt;<span class="p">;</span><span class="w"> </span><span class="nv">rel</span><span class="o">=</span><span class="s2">&quot;preload&quot;</span><span class="p">;</span><span class="w"> </span><span class="nv">as</span><span class="o">=</span><span class="s2">&quot;script&quot;</span><span class="p">;</span><span class="w"> </span>nopush<span class="p">;</span><span class="w"> </span>crossorigin
&lt;<span class="w"> </span>Transfer-Encoding:<span class="w"> </span>chunked
&lt;
<span class="o">{</span><span class="w"> </span><span class="o">[</span><span class="m">3491</span><span class="w"> </span>bytes<span class="w"> </span>data<span class="o">]</span>
</code></pre></div></p>
<p>If the request processing reaches the maximum number of loopbacks (by default max=9), the routing will
result in an error.</p>
<h2 id="dynamic-backend">Dynamic backend<a class="headerlink" href="#dynamic-backend" title="Permanent link">&para;</a></h2>
<p>The dynamic backend, <code>&lt;dynamic&gt;</code>, will get the backend to call by data
provided by filters.  This allows skipper as library users to do proxy
calls to a certain target from their own implementation dynamically
looked up by their filters.</p>
<p>Example shows how to set a target by a provided filter, which would be similar to a network backend:</p>
<div class="highlight"><pre><span></span><code>r0: * -&gt; setDynamicBackendUrl(&quot;https://www.zalando.de&quot;) -&gt; &lt;dynamic&gt;;
</code></pre></div>
<p>Proxy configured as defined above with access logs showing 200 for the  call:
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>./bin/skipper<span class="w"> </span>-inline-routes<span class="w"> </span><span class="s1">&#39;r0: * -&gt; setDynamicBackendUrl(&quot;https://www.zalando.de&quot;) -&gt; &lt;dynamic&gt;;&#39;</span>
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>Expose<span class="w"> </span>metrics<span class="w"> </span><span class="k">in</span><span class="w"> </span>codahale<span class="w"> </span>format
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>support<span class="w"> </span>listener<span class="w"> </span>on<span class="w"> </span>:9911
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>proxy<span class="w"> </span>listener<span class="w"> </span>on<span class="w"> </span>:9090
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>TLS<span class="w"> </span>settings<span class="w"> </span>not<span class="w"> </span>found,<span class="w"> </span>defaulting<span class="w"> </span>to<span class="w"> </span>HTTP
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>route<span class="w"> </span>settings,<span class="w"> </span>reset,<span class="w"> </span>route:<span class="w"> </span>r0:<span class="w"> </span>*<span class="w"> </span>-&gt;<span class="w"> </span>setDynamicBackendUrl<span class="o">(</span><span class="s2">&quot;https://www.zalando.de&quot;</span><span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>&lt;dynamic&gt;
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>route<span class="w"> </span>settings<span class="w"> </span>received
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>route<span class="w"> </span>settings<span class="w"> </span>applied
::1<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span><span class="o">[</span><span class="m">05</span>/Feb/2019:15:09:34<span class="w"> </span>+0100<span class="o">]</span><span class="w"> </span><span class="s2">&quot;GET / HTTP/1.1&quot;</span><span class="w"> </span><span class="m">200</span><span class="w"> </span><span class="m">164408</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="w"> </span><span class="s2">&quot;curl/7.49.0&quot;</span><span class="w"> </span><span class="m">132</span><span class="w"> </span>localhost:9090<span class="w"> </span>-<span class="w"> </span>-
</code></pre></div></p>
<p>Client example with request and response headers:
<div class="highlight"><pre><span></span><code>$ curl -sv localhost:9090/ &gt;/dev/null
*   Trying ::1...
* Connected to localhost (::1) port 9090 (#0)
&gt; GET / HTTP/1.1
&gt; Host: localhost:9090
&gt; User-Agent: curl/7.49.0
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Cache-Control: no-cache, no-store, must-revalidate
&lt; Content-Type: text/html
&lt; Date: Tue, 05 Feb 2019 14:09:34 GMT
&lt; Link: &lt;https://mosaic01.ztat.net/base-assets/require-2.1.22.min.js&gt;; rel=&quot;preload&quot;; as=&quot;script&quot;; nopush; crossorigin
&lt; Pragma: no-cache
&lt; Server: Skipper
&lt; Transfer-Encoding: chunked
&lt;
{ [3491 bytes data]
* Connection #0 to host localhost left intact
</code></pre></div></p>
<p>When no filters modifying the target are set (e.g. <code>r0: * -&gt; &lt;dynamic&gt;;</code>), the
target host defaults to either the <code>Host</code> header or the host name given in the
URL, and the target scheme defaults to either <code>https</code> when TLS is
configured or <code>http</code> when TLS is not configured.</p>
<h2 id="forward-backend">Forward backend<a class="headerlink" href="#forward-backend" title="Permanent link">&para;</a></h2>
<p>The forward backend, <code>&lt;forward&gt;</code>, will set the backend to operators
choice set by <code>-forward-backend-url</code>.  This can be useful for data plane
migrations. In one case we want to switch from one Kubernetes cluster
to another Kubernetes cluster, but both cluster data planes can reach
each other. The route with the <code>&lt;forward&gt;</code> will get cleaned all
filters so there is no duplicate filter execution. This is useful
because old and new clusters will have the same routing objects, that
apply a set of routes with filters. Filters, for example <code>modPath</code>, can
create an unexpected change to requests and responses passing through a
chain of proxies with duplicated routes.</p>
<p>Example:
<div class="highlight"><pre><span></span><code>old&gt; skipper -inline-routes=&#39;r: * -&gt; modPath(&quot;^/&quot;, &quot;/foo/&quot;) -&gt; &lt;forward&gt;&#39; -address :9090 -forward-backend-url=http://127.0.0.1:9003
new&gt; skipper -inline-routes=&#39;r: * -&gt; modPath(&quot;^/&quot;,&quot;/foo/&quot;) -&gt; &quot;http://127.0.0.1:12345&quot;&#39; -address :9003

% nc -l 12345
GET /foo/bar?q=a HTTP/1.1
Host: 127.0.0.1:12345
User-Agent: curl/7.49.0
Accept: */*
Accept-Encoding: gzip

curl http://localhost:9090/bar\?q\=a -v
*   Trying ::1...
* Connected to localhost (::1) port 9090 (#0)
&gt; GET /bar?q=a HTTP/1.1
&gt; Host: localhost:9090
&gt; User-Agent: curl/7.49.0
&gt; Accept: */*
</code></pre></div></p>
<p>You can see our netcat (nc) backend observes <code>/foo/bar</code> as path and
not <code>/foo/bar/bar</code>, if filters would be applied in the route with
<code>&lt;forward&gt;</code>.</p>
<h2 id="load-balancer-backend">Load Balancer backend<a class="headerlink" href="#load-balancer-backend" title="Permanent link">&para;</a></h2>
<p>The loadbalancer backend, <code>&lt;$algorithm, "backend1", "backend2"&gt;</code>, will
balance the load across all given backends using the algorithm set in
<code>$algorithm</code>. If <code>$algorithm</code> is not specified it will use the default
algorithm set by Skipper at start.</p>
<p>Current implemented algorithms:</p>
<ul>
<li><code>roundRobin</code>: backend is chosen by the round robin algorithm, starting with a random selected backend to spread across all backends from the beginning</li>
<li><code>random</code>: backend is chosen at random</li>
<li><code>consistentHash</code>: backend is chosen by <a href="https://en.wikipedia.org/wiki/Consistent_hashing">consistent hashing</a> algorithm based on the request key. The request key is derived from <code>X-Forwarded-For</code> header or request remote IP address as the fallback. Use <a href="../filters/#consistenthashkey"><code>consistentHashKey</code></a> filter to set the request key. Use <a href="../filters/#consistenthashbalancefactor"><code>consistentHashBalanceFactor</code></a> to prevent popular keys from overloading a single backend endpoint.</li>
<li><code>powerOfRandomNChoices</code>: backend is chosen by powerOfRandomNChoices algorithm with selecting N random endpoints and picking the one with least outstanding requests from them. (<a href="http://www.eecs.harvard.edu/~michaelm/postscripts/handbook2001.pdf">http://www.eecs.harvard.edu/~michaelm/postscripts/handbook2001.pdf</a>)</li>
<li><strong>TODO</strong>: <a href="https://github.com/zalando/skipper/issues/557">https://github.com/zalando/skipper/issues/557</a></li>
</ul>
<p>Route example with 2 backends and the <code>roundRobin</code> algorithm:
<div class="highlight"><pre><span></span><code>r0: * -&gt; &lt;roundRobin, &quot;http://127.0.0.1:9998&quot;, &quot;http://127.0.0.1:9997&quot;&gt;;
</code></pre></div></p>
<p>Route example with 2 backends and the <code>random</code> algorithm:
<div class="highlight"><pre><span></span><code>r0: * -&gt; &lt;random, &quot;http://127.0.0.1:9998&quot;, &quot;http://127.0.0.1:9997&quot;&gt;;
</code></pre></div></p>
<p>Route example with 2 backends and the <code>consistentHash</code> algorithm:
<div class="highlight"><pre><span></span><code>r0: * -&gt; &lt;consistentHash, &quot;http://127.0.0.1:9998&quot;, &quot;http://127.0.0.1:9997&quot;&gt;;
</code></pre></div></p>
<p>Route example with 2 backends and the <code>powerOfRandomNChoices</code> algorithm:
<div class="highlight"><pre><span></span><code>r0: * -&gt; &lt;powerOfRandomNChoices, &quot;http://127.0.0.1:9998&quot;, &quot;http://127.0.0.1:9997&quot;&gt;;
</code></pre></div></p>
<p>Proxy with <code>roundRobin</code> loadbalancer and two backends:
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>./bin/skipper<span class="w"> </span>-inline-routes<span class="w"> </span><span class="s1">&#39;r0: *  -&gt; &lt;roundRobin, &quot;http://127.0.0.1:9998&quot;, &quot;http://127.0.0.1:9997&quot;&gt;;&#39;</span>
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>Expose<span class="w"> </span>metrics<span class="w"> </span><span class="k">in</span><span class="w"> </span>codahale<span class="w"> </span>format
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>route<span class="w"> </span>settings,<span class="w"> </span>reset,<span class="w"> </span>route:<span class="w"> </span>r0:<span class="w"> </span>*<span class="w"> </span>-&gt;<span class="w"> </span>&lt;roundRobin,<span class="w"> </span><span class="s2">&quot;http://127.0.0.1:9998&quot;</span>,<span class="w"> </span><span class="s2">&quot;http://127.0.0.1:9997&quot;</span>&gt;
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>support<span class="w"> </span>listener<span class="w"> </span>on<span class="w"> </span>:9911
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>route<span class="w"> </span>settings<span class="w"> </span>received
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>proxy<span class="w"> </span>listener<span class="w"> </span>on<span class="w"> </span>:9090
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>TLS<span class="w"> </span>settings<span class="w"> </span>not<span class="w"> </span>found,<span class="w"> </span>defaulting<span class="w"> </span>to<span class="w"> </span>HTTP
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>route<span class="w"> </span>settings<span class="w"> </span>applied
::1<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span><span class="o">[</span><span class="m">05</span>/Feb/2019:15:39:06<span class="w"> </span>+0100<span class="o">]</span><span class="w"> </span><span class="s2">&quot;GET / HTTP/1.1&quot;</span><span class="w"> </span><span class="m">200</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="w"> </span><span class="s2">&quot;curl/7.49.0&quot;</span><span class="w"> </span><span class="m">3</span><span class="w"> </span>localhost:9090<span class="w"> </span>-<span class="w"> </span>-
::1<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span><span class="o">[</span><span class="m">05</span>/Feb/2019:15:39:07<span class="w"> </span>+0100<span class="o">]</span><span class="w"> </span><span class="s2">&quot;GET / HTTP/1.1&quot;</span><span class="w"> </span><span class="m">200</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="w"> </span><span class="s2">&quot;curl/7.49.0&quot;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>localhost:9090<span class="w"> </span>-<span class="w"> </span>-
::1<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span><span class="o">[</span><span class="m">05</span>/Feb/2019:15:39:08<span class="w"> </span>+0100<span class="o">]</span><span class="w"> </span><span class="s2">&quot;GET / HTTP/1.1&quot;</span><span class="w"> </span><span class="m">200</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="w"> </span><span class="s2">&quot;curl/7.49.0&quot;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>localhost:9090<span class="w"> </span>-<span class="w"> </span>-
::1<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span><span class="o">[</span><span class="m">05</span>/Feb/2019:15:39:09<span class="w"> </span>+0100<span class="o">]</span><span class="w"> </span><span class="s2">&quot;GET / HTTP/1.1&quot;</span><span class="w"> </span><span class="m">200</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="w"> </span><span class="s2">&quot;curl/7.49.0&quot;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>localhost:9090<span class="w"> </span>-<span class="w"> </span>-
</code></pre></div></p>
<p>Backend1 returns &ldquo;A&rdquo; in the body:
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>./bin/skipper<span class="w"> </span>-address<span class="o">=</span><span class="s2">&quot;:9998&quot;</span><span class="w"> </span>-inline-routes<span class="w"> </span><span class="s1">&#39;r0: * -&gt; inlineContent(&quot;A&quot;) -&gt; &lt;shunt&gt;;&#39;</span>
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>Expose<span class="w"> </span>metrics<span class="w"> </span><span class="k">in</span><span class="w"> </span>codahale<span class="w"> </span>format
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>support<span class="w"> </span>listener<span class="w"> </span>on<span class="w"> </span>:9911
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>proxy<span class="w"> </span>listener<span class="w"> </span>on<span class="w"> </span>:9998
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>TLS<span class="w"> </span>settings<span class="w"> </span>not<span class="w"> </span>found,<span class="w"> </span>defaulting<span class="w"> </span>to<span class="w"> </span>HTTP
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>route<span class="w"> </span>settings,<span class="w"> </span>reset,<span class="w"> </span>route:<span class="w"> </span>r0:<span class="w"> </span>*<span class="w"> </span>-&gt;<span class="w"> </span>inlineContent<span class="o">(</span><span class="s2">&quot;A&quot;</span><span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>&lt;shunt&gt;
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>route<span class="w"> </span>settings<span class="w"> </span>received
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>route<span class="w"> </span>settings<span class="w"> </span>applied
<span class="m">127</span>.0.0.1<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span><span class="o">[</span><span class="m">05</span>/Feb/2019:15:39:06<span class="w"> </span>+0100<span class="o">]</span><span class="w"> </span><span class="s2">&quot;GET / HTTP/1.1&quot;</span><span class="w"> </span><span class="m">200</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="w"> </span><span class="s2">&quot;curl/7.49.0&quot;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">127</span>.0.0.1:9998<span class="w"> </span>-<span class="w"> </span>-
<span class="m">127</span>.0.0.1<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span><span class="o">[</span><span class="m">05</span>/Feb/2019:15:39:08<span class="w"> </span>+0100<span class="o">]</span><span class="w"> </span><span class="s2">&quot;GET / HTTP/1.1&quot;</span><span class="w"> </span><span class="m">200</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="w"> </span><span class="s2">&quot;curl/7.49.0&quot;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">127</span>.0.0.1:9998<span class="w"> </span>-<span class="w"> </span>-
</code></pre></div></p>
<p>Backend2 returns &ldquo;B&rdquo; in the body:
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>./bin/skipper<span class="w"> </span>-address<span class="o">=</span><span class="s2">&quot;:9997&quot;</span><span class="w"> </span>-inline-routes<span class="w"> </span><span class="s1">&#39;r0: * -&gt; inlineContent(&quot;B&quot;) -&gt; &lt;shunt&gt;;&#39;</span>
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>Expose<span class="w"> </span>metrics<span class="w"> </span><span class="k">in</span><span class="w"> </span>codahale<span class="w"> </span>format
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>support<span class="w"> </span>listener<span class="w"> </span>on<span class="w"> </span>:9911
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>proxy<span class="w"> </span>listener<span class="w"> </span>on<span class="w"> </span>:9997
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>route<span class="w"> </span>settings,<span class="w"> </span>reset,<span class="w"> </span>route:<span class="w"> </span>r0:<span class="w"> </span>*<span class="w"> </span>-&gt;<span class="w"> </span>inlineContent<span class="o">(</span><span class="s2">&quot;B&quot;</span><span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>&lt;shunt&gt;
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>TLS<span class="w"> </span>settings<span class="w"> </span>not<span class="w"> </span>found,<span class="w"> </span>defaulting<span class="w"> </span>to<span class="w"> </span>HTTP
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>route<span class="w"> </span>settings<span class="w"> </span>received
<span class="o">[</span>APP<span class="o">]</span>INFO<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>route<span class="w"> </span>settings<span class="w"> </span>applied
<span class="m">127</span>.0.0.1<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span><span class="o">[</span><span class="m">05</span>/Feb/2019:15:39:07<span class="w"> </span>+0100<span class="o">]</span><span class="w"> </span><span class="s2">&quot;GET / HTTP/1.1&quot;</span><span class="w"> </span><span class="m">200</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="w"> </span><span class="s2">&quot;curl/7.49.0&quot;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">127</span>.0.0.1:9997<span class="w"> </span>-<span class="w"> </span>-
<span class="m">127</span>.0.0.1<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span><span class="o">[</span><span class="m">05</span>/Feb/2019:15:39:09<span class="w"> </span>+0100<span class="o">]</span><span class="w"> </span><span class="s2">&quot;GET / HTTP/1.1&quot;</span><span class="w"> </span><span class="m">200</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="w"> </span><span class="s2">&quot;curl/7.49.0&quot;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">127</span>.0.0.1:9997<span class="w"> </span>-<span class="w"> </span>-
</code></pre></div></p>
<p>Client:
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>curl<span class="w"> </span>-s<span class="w"> </span>http://localhost:9090/
A
$<span class="w"> </span>curl<span class="w"> </span>-s<span class="w"> </span>http://localhost:9090/
B
$<span class="w"> </span>curl<span class="w"> </span>-s<span class="w"> </span>http://localhost:9090/
A
$<span class="w"> </span>curl<span class="w"> </span>-s<span class="w"> </span>http://localhost:9090/
B
</code></pre></div></p>
<h2 id="backend-protocols">Backend Protocols<a class="headerlink" href="#backend-protocols" title="Permanent link">&para;</a></h2>
<p>Current implemented protocols:</p>
<ul>
<li><code>http</code>: (default) http protocol</li>
<li><code>fastcgi</code>: (<em>experimental</em>) directly connect Skipper with a FastCGI backend like PHP FPM.</li>
</ul>
<p>Route example that uses FastCGI (<em>experimental</em>):
<div class="highlight"><pre><span></span><code>php: * -&gt; setFastCgiFilename(&quot;index.php&quot;) -&gt; &quot;fastcgi://127.0.0.1:9000&quot;;
php_lb: * -&gt; setFastCgiFilename(&quot;index.php&quot;) -&gt; &lt;roundRobin, &quot;fastcgi://127.0.0.1:9000&quot;, &quot;fastcgi://127.0.0.1:9001&quot;&gt;;
</code></pre></div></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>