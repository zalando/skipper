apiVersion: zalando.org/v1
kind: RouteGroup
metadata:
  name: my-routes
  annotations:
    zalando.org/backend-weights:
      {"foo-service-v1": 80, "foo-service-v2": 20}
spec:
  backends:
  - serviceName: foo-service-v1
    servicePort: 80
  - serviceName: foo-service-v2
    servicePort: 80
  paths:
  - path: /api/resource
    method: post
    configs:
    - filters:
      - f1("foo")
      - f2("bar", "baz")
      predicates:
      - P1("serviceUser")
      - P2("bar", "baz")
    - filters:
      - f1("dosomething")
      predicates:
      - P1("adminusers")
  - path: /api/resource/*
    method:  get
    configs:
    - filters:
      - f("foo")
      predicates:
      - P("b", 0.4)
      backend:  # overrides default
        serviceName: migrate-to-bar-service
        servicePort: 8080
  - path: /events
    method:  post
    configs:
    - filters:
      - f1("a", "b", "c")
      - f2("hello")
      predicates:
      - P1("foo")
